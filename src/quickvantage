#!/bin/bash

if [ "$(id -u)" -ne 0 ]; then
    echo "üîí Requesting super-user privileges..."
    exec sudo "$0" "$@"
    exit 1
fi

# Function to enable Conservation Mode(Used wildcards 'cuz the digits after VPC differ on different variants of the same model)
enable_conservation() {
    echo 1 > /sys/bus/platf*/drivers/ideap*/VPC*/conser*
    echo "‚úÖ Conservation Mode has been enabled."
}
disable_conservation() {
    echo 0 > /sys/bus/platf*/drivers/ideap*/VPC*/conser*
    echo "‚ùå Conservation Mode has been disabled."
}

# Function Lock
enable_fn_lock() {
    echo 1 > /sys/bus/platf*/drivers/ideap*/VPC*/fn*
    echo "‚úÖ Function Lock has been enabled."
}
disable_fn_lock() {
    echo 0 > /sys/bus/platf*/drivers/ideap*/VPC*/fn*
    echo "‚ùå Function Lock has been disabled."
}

# To display the menu
echo "          Quick-Vantage          "
echo "|===============================|"
echo "|  1) Enable Conservation Mode  |"
echo "|  2) Enable Function Lock      |"
echo "|  3) Enable Both               |"
echo "|  4) Disable Conservation Mode |"
echo "|  5) Disable Function Lock     |"
echo "|  6) Disable Both              |"
echo "|===============================|"

read -p "Choose an option (1-6): " choice

# Case for processing the user-input
case $choice in
    1)
        enable_conservation
        ;;
    2)
        enable_fn_lock
        ;;
    3)
        enable_conservation
        enable_fn_lock
        ;;
    4)
        disable_conservation
        ;;
    5)
        disable_fn_lock
        ;;
    6)
        disable_conservation
        disable_fn_lock
        ;;
    *)
        echo "‚ùå Invalid option. Exiting."
        exit 1
        ;;
esac